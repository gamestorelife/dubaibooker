// Fetch the booking data from the server
document.addEventListener("DOMContentLoaded", async () => {
  try {
    const response = await fetch("/retrieve-apartment-booking");
    const result = await response.json();

    if (response.ok && result.data) {
      const bookingData = result.data;

      // Render booking data
      let detailsHTML = `
     <div>
     <label id="phone-label" for="phone">
        <strong>Selected Details</strong>
        </label>
         <div class="d-flex">
            <div class="date-in-jw">
             <p>Check in date</p>
            </div>

           <div class="date-out-jw">
             <p>${bookingData.checkInDate}</p>
           </div>
         </div>
          <div class="d-flex">
            <div class="date-in-jw">
              <p>Check Out date</p>
            </div>

           <div class="date-out-jw">
           <p>${bookingData.checkOutDate}</p>
          </div>
         </div>
        <div class="d-flex">
         <div class="date-in-jw">
          <p>Adults</p>
         </div>

          <div class="date-out-jw">
           <p> ${bookingData.adults}</p>
           </div>
        </div>


    </div>`;

      // If children were selected, display their count and ages
      if (bookingData.children > 0) {
        detailsHTML += `
                 <div class="d-flex">
                        <div class="date-in-jw">
                         <p>children</p>
                        </div>

                        <div class="date-out-jw">
                           <p>${bookingData.children}</p>
                        </div>
                </div>`;
        if (bookingData.childAges.length > 0) {
          detailsHTML += `
           <div class="d-flex">
                        <div class="date-in-jw">
                         <p>children Ages</p>
                        </div>

                        <div class="date-out-jw">
                           <p>${bookingData.childAges.join(", ")}</p>
                        </div>
                </div>
          `;
        }
      }

      document.getElementById("booking-details").innerHTML = detailsHTML;
    } else {
      document.getElementById("booking-details").innerHTML =
        "<p>No booking data found.</p>";
    }
  } catch (error) {
    console.error("Error fetching booking data:", error);
    document.getElementById("booking-details").innerHTML =
      "<p>Error retrieving booking data.</p>";
  }
});
